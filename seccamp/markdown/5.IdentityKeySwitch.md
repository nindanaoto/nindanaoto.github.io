---
marp: true
---
<!-- 
theme: default
size: 16:9
paginate: true
footer : ![](../image/ccbysa.png) [licence](https://creativecommons.org/licenses/by-sa/4.0/)
style: |
  h1, h2, h3, h4, h5, header, footer {
        color: white;
    }
  section {
    background-color: #505050;
    color:white
  }
  table{
      color:black
  }
  code{
    color:black
  }
-->

<!-- page_number: true -->

# TFHE実装入門

## 5.Identity Key Switch

松岡　航太郎

---

## Identity Key Switchとは

- "Key Switch"は一般に暗号文を復号することなしに秘密鍵を変更することを言う
- ここでの"Identity Key Switch"はTLWElvl1をTLWElvl0に切り替える操作のこと

---

## Identity Key Switchのアイデア

- TLWElvl1の$b-\mathbf{a}⋅ \mathbf{s}$をTLWEWlvl0を使って準同型的に演算する
- TLWElvl0の平文が$b-\mathbf{a}⋅ \mathbf{s}$にノイズを足したものになる
- ∴実質TLWElvl1と平文が同じである

---

## Identity Key Switchの素朴な実装法(スケーリングのみ)

- 論文とはずれるが、External Productと同じ流れで説明をしよう
- $basebit∈\mathbb{Z}^+$
- $\mathbf{KS}$を$KS_i$が$\frac{s_i}{2^{basebit}}$を平文とするTLWElvl0であるとする
- $(\mathbf{ã},b̃)$は出力となるTLWElvl1

```
b̃=b
for i from 0 to n
  ã = 0
offset = 1 << (32 - (1 + basebit)) //四捨五入のため
for i from 0 to N
  ā = (aᵢ+offset) >> (32 - basebit) //ここでTorusから整数に変わっている
  (𝐚̃,b̃) -= ā ⋅ KSᵢ
return (𝐚̃,b̃)
```